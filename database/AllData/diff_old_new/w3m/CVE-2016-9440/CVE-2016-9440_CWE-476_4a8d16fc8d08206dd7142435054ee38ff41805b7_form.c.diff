diff --git a/form.c b/form.c
index 805505ff..b56347b3 100644
--- a/form.c
+++ b/form.c
@@ -461,6 +461,8 @@ formUpdateBuffer(Anchor *a, Buffer *buf, FormItemList *form)
 #endif				/* MENU_SELECT */
 	    p = form->value->ptr;
 	l = buf->currentLine;
+	if (!l)
+	    break;
 	if (form->type == FORM_TEXTAREA) {
 	    int n = a->y - buf->currentLine->linenumber;
 	    if (n > 0)
