void Gobby::ViewCommands::on_menu_language_changed()
{
	// TODO: Get ID, lookup language, set language.
	Glib::ustring language_id;
	m_actions.highlight_mode->get_state(language_id);

	GtkSourceLanguage* language = NULL;
	if(!language_id.empty())
	{
		language = gtk_source_language_manager_get_language(
			m_language_manager, language_id.c_str());

		// The language should exist by construction, if the languages
		// available in the language manager don't change at runtime
		g_assert(language != NULL);
	}

	g_assert(m_current_view != NULL);

	m_document_language_changed_connection.block();
	m_current_view->set_language(language);
	m_document_language_changed_connection.unblock();
}
