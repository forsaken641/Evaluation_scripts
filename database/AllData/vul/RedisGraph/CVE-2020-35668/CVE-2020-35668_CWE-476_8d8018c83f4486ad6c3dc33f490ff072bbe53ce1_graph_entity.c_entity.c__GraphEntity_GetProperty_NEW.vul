SIValue *GraphEntity_GetProperty(const GraphEntity *e, Attribute_ID attr_id) {
	if(attr_id == ATTRIBUTE_NOTFOUND) return PROPERTY_NOTFOUND;
	if(e->entity == NULL) {
		/* The internal entity pointer should only be NULL if the entity
		 * is in an intermediate state, such as a node scheduled for creation.
		 * Note that this exception may cause memory to be leaked in the caller. */
		ASSERT(e->id == INVALID_ENTITY_ID);
		ErrorCtx_SetError("Attempted to access undefined property");
		return PROPERTY_NOTFOUND;
	}

	for(int i = 0; i < e->entity->prop_count; i++) {
		if(attr_id == e->entity->properties[i].id) {
			// Note, unsafe as entity properties can get reallocated.
			return &(e->entity->properties[i].value);
		}
	}

	return PROPERTY_NOTFOUND;
}
