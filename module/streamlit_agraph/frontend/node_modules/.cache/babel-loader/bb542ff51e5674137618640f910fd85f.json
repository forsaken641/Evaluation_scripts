{"ast":null,"code":"import{Streamlit,StreamlitComponentBase,withStreamlitConnection}from\"streamlit-component-lib\";import React from\"react\";import VisGraph from'react-vis-graph-wrapper';import{jsx as _jsx}from\"react/jsx-runtime\";class StreamlitVisGraph extends StreamlitComponentBase{constructor(){super(...arguments);this.render=()=>{function lookup_node_id(lookup_node,mynodes){for(let node of mynodes){if(node.id===lookup_node){return node;}}}var graph=JSON.parse(this.props.args[\"data\"]);var nodes=graph.nodes.slice();for(let i=0;i<nodes.length;i++){if(nodes[i].title)nodes[i].div=this.htmlTitle(nodes[i].title);}const options=JSON.parse(this.props.args[\"config\"]);const events={selectNode:event=>{Streamlit.setComponentValue(event.nodes[0]);},doubleClick:event=>{console.log(event.nodes);// let link = nodes;\nlet lookup_node=lookup_node_id(event.nodes[0],nodes);let link=lookup_node.div.innerHTML;if(link){window.open(link);}}};return/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(VisGraph,{graph:graph,options:options,events:events,getNetwork:network=>{//  if you want access to vis.js network api you can set the state in a parent component using this property\n//console.log(network);\n}})});};this.htmlTitle=html=>{const container=document.createElement(\"div\");container.innerHTML=html;return container;};}}export default withStreamlitConnection(StreamlitVisGraph);","map":{"version":3,"names":["Streamlit","StreamlitComponentBase","withStreamlitConnection","React","VisGraph","jsx","_jsx","StreamlitVisGraph","constructor","arguments","render","lookup_node_id","lookup_node","mynodes","node","id","graph","JSON","parse","props","args","nodes","slice","i","length","title","div","htmlTitle","options","events","selectNode","event","setComponentValue","doubleClick","console","log","link","innerHTML","window","open","children","getNetwork","network","html","container","document","createElement"],"sources":["/Users/junbodu/Documents/JYH-lab/code/prompt-ui/streamlit_agraph/frontend/src/StreamlitVisGraph.tsx"],"sourcesContent":["import {\n  Streamlit,\n  StreamlitComponentBase,\n  withStreamlitConnection,\n} from \"streamlit-component-lib\"\nimport React, { ReactNode } from \"react\"\nimport VisGraph from 'react-vis-graph-wrapper';\n\n\nclass StreamlitVisGraph extends StreamlitComponentBase {\n\n  public render = (): ReactNode => {\n\n    function lookup_node_id(lookup_node, mynodes){\n      for (let node of mynodes){\n          if (node.id === lookup_node){\n              return node;\n          }\n    }}\n\n    var graph = JSON.parse(this.props.args[\"data\"]);\n    \n    var nodes = graph.nodes.slice();\n\n    for (let i = 0; i < nodes.length; i++) {\n      if(nodes[i].title)\n        nodes[i].div = this.htmlTitle(nodes[i].title);\n    }\n  \n    const options = JSON.parse(this.props.args[\"config\"]);\n\n    const events = {\n\n      selectNode: (event:any) => {\n        Streamlit.setComponentValue(event.nodes[0]);\n      },\n\n      doubleClick: (event:any) => {\n        console.log(event.nodes);\n        // let link = nodes;\n        let lookup_node = lookup_node_id(event.nodes[0], nodes);\n        let link = lookup_node.div.innerHTML;\n        if(link){\n          window.open(link);\n        }\n      }\n    };\n    return (\n      <span>\n    \n      <VisGraph\n      graph={graph}\n      options={options}\n      events={events}\n      getNetwork={(network: any) => {\n        //  if you want access to vis.js network api you can set the state in a parent component using this property\n        //console.log(network);\n      }}/>\n      </span>\n    )\n  }\n\n  private htmlTitle = (html):any => {   \n    const container = document.createElement(\"div\");\n    container.innerHTML = html;\n    return container;\n  }\n}\n\nexport default withStreamlitConnection(StreamlitVisGraph)\n"],"mappings":"AAAA,OACEA,SAAS,CACTC,sBAAsB,CACtBC,uBAAuB,KAClB,yBAAyB,CAChC,MAAO,CAAAC,KAAK,KAAqB,OAAO,CACxC,MAAO,CAAAC,QAAQ,KAAM,yBAAyB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAG/C,KAAM,CAAAC,iBAAiB,QAAS,CAAAN,sBAAuB,CAAAO,YAAA,WAAAC,SAAA,OAE9CC,MAAM,CAAG,IAAiB,CAE/B,QAAS,CAAAC,cAAcA,CAACC,WAAW,CAAEC,OAAO,CAAC,CAC3C,IAAK,GAAI,CAAAC,IAAI,GAAI,CAAAD,OAAO,CAAC,CACrB,GAAIC,IAAI,CAACC,EAAE,GAAKH,WAAW,CAAC,CACxB,MAAO,CAAAE,IAAI,CACf,CACN,CAAC,CAED,GAAI,CAAAE,KAAK,CAAGC,IAAI,CAACC,KAAK,CAAC,IAAI,CAACC,KAAK,CAACC,IAAI,CAAC,MAAM,CAAC,CAAC,CAE/C,GAAI,CAAAC,KAAK,CAAGL,KAAK,CAACK,KAAK,CAACC,KAAK,CAAC,CAAC,CAE/B,IAAK,GAAI,CAAAC,CAAC,CAAG,CAAC,CAAEA,CAAC,CAAGF,KAAK,CAACG,MAAM,CAAED,CAAC,EAAE,CAAE,CACrC,GAAGF,KAAK,CAACE,CAAC,CAAC,CAACE,KAAK,CACfJ,KAAK,CAACE,CAAC,CAAC,CAACG,GAAG,CAAG,IAAI,CAACC,SAAS,CAACN,KAAK,CAACE,CAAC,CAAC,CAACE,KAAK,CAAC,CACjD,CAEA,KAAM,CAAAG,OAAO,CAAGX,IAAI,CAACC,KAAK,CAAC,IAAI,CAACC,KAAK,CAACC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAErD,KAAM,CAAAS,MAAM,CAAG,CAEbC,UAAU,CAAGC,KAAS,EAAK,CACzB/B,SAAS,CAACgC,iBAAiB,CAACD,KAAK,CAACV,KAAK,CAAC,CAAC,CAAC,CAAC,CAC7C,CAAC,CAEDY,WAAW,CAAGF,KAAS,EAAK,CAC1BG,OAAO,CAACC,GAAG,CAACJ,KAAK,CAACV,KAAK,CAAC,CACxB;AACA,GAAI,CAAAT,WAAW,CAAGD,cAAc,CAACoB,KAAK,CAACV,KAAK,CAAC,CAAC,CAAC,CAAEA,KAAK,CAAC,CACvD,GAAI,CAAAe,IAAI,CAAGxB,WAAW,CAACc,GAAG,CAACW,SAAS,CACpC,GAAGD,IAAI,CAAC,CACNE,MAAM,CAACC,IAAI,CAACH,IAAI,CAAC,CACnB,CACF,CACF,CAAC,CACD,mBACE9B,IAAA,SAAAkC,QAAA,cAEAlC,IAAA,CAACF,QAAQ,EACTY,KAAK,CAAEA,KAAM,CACbY,OAAO,CAAEA,OAAQ,CACjBC,MAAM,CAAEA,MAAO,CACfY,UAAU,CAAGC,OAAY,EAAK,CAC5B;AACA;AAAA,CACA,CAAC,CAAC,CACE,CAAC,CAEX,CAAC,MAEOf,SAAS,CAAIgB,IAAI,EAAS,CAChC,KAAM,CAAAC,SAAS,CAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC,CAC/CF,SAAS,CAACP,SAAS,CAAGM,IAAI,CAC1B,MAAO,CAAAC,SAAS,CAClB,CAAC,EACH,CAEA,cAAe,CAAA1C,uBAAuB,CAACK,iBAAiB,CAAC"},"metadata":{},"sourceType":"module"}